<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin & Staff Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <script defer src="script.js"></script>
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="profile">
        <h3 id="sidebarName">Admin Name</h3>
      </div>
      <div class="menu-card">
        <nav class="menu" id="sidebarMenu">
          <!-- Admin Menu -->
          <ul class="admin-menu">
            <li><a href="#admin-home" data-admin-target="home" class="active">Home</a></li>
            <li><a href="#admin-approvals" data-admin-target="approvals">Approvals/Withdraws</a></li>
            <li><a href="#admin-staff" data-admin-target="staff">Staff</a></li>
            <li><a href="#admin-drivers" data-admin-target="drivers">Drivers</a></li>
          </ul>

          <!-- Staff Menu -->
          <ul class="staff-menu hidden">
            <li><a href="#staff-home" data-staff-target="staffHome" class="active">Home</a></li>
            <li><a href="#staff-orders" data-staff-target="staffOrders">Orders</a></li>
          </ul>
        </nav>
        <button class="logout-btn">Logout</button>
      </div>      
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <h1 id="headerTitle" class="floating-title">Administrator</h1>
      <header>
        <button class="switch-btn" onclick="toggleMode()">Switch to Staff/Admin</button>
        <button id="changePasswordMainBtn" class="change-password-btn" onclick="openChangePasswordPopup()">
          Change Password
        </button>
      </header>


      <!-- ====== ADMIN PAGES ====== -->
      <section id="home" class="page active">
        <h2>Home Page</h2>

        <div class="status-card">
          <p>You Have Approvals</p>
          <span id="approvalCount" class="notification">0</span>
        </div>

        <div class="status-card">
          <p>You Have Withdraws</p>
          <span id="withdrawCount" class="notification">0</span>
        </div>
      </section>

      <section id="approvals" class="page">
        <h2>Approvals</h2>
        <div class="approval-item">
          <span class="restaurant-name">Restaurant Name</span>
          <div class="buttons">
            <button class="approve" onclick="promptRemoval(this)">Approve</button>
            <button class="deny" onclick="promptRemoval(this)">Deny</button>
          </div>
        </div>
        <div class="approval-item">
          <span class="restaurant-name">Restaurant Name</span>
          <div class="buttons">
            <button class="approve" onclick="promptRemoval(this)">Approve</button>
            <button class="deny" onclick="promptRemoval(this)">Deny</button>
          </div>
        </div>

        <h2 class="section-header">Withdraws</h2>
        <div class="withdraw-item">
          <div class="withdraw-header" onclick="toggleWithdraw(this)">
            <span class="restaurant-name">Restaurant Name</span>
            <span class="arrow">&#9662;</span>
          </div>
          <div class="withdraw-content">
            <textarea placeholder="Enter notes here..."></textarea>
            <div class="buttons">
              <button class="approve" onclick="promptRemoval(this)">Approve</button>
              <button class="deny" onclick="promptRemoval(this)">Deny</button>
            </div>
          </div>
        </div>

        <div class="withdraw-item">
          <div class="withdraw-header" onclick="toggleWithdraw(this)">
            <span class="restaurant-name">Restaurant B</span>
            <span class="arrow">&#9662;</span>
          </div>
          <div class="withdraw-content">
            <textarea placeholder="Enter notes here..."></textarea>
            <div class="buttons">
              <button class="approve" onclick="promptRemoval(this)">Approve</button>
              <button class="deny" onclick="promptRemoval(this)">Deny</button>
            </div>
          </div>
        </div>
      </section>

      <section id="staff" class="page">
        <h2>Staff</h2>
        <!-- Container to hold all staff items -->
        <div id="staffList">
          <div class="list-item">
            <span>Staff Name</span>
            <div class="buttons">
              <button class="remove" onclick="promptRemoval(this)">Remove</button>
            </div>
          </div>
        </div>

        <button class="add-bottom" onclick="openAddStaffPopup()">Add Staff</button>
      </section>

      <section id="drivers" class="page">
        <h2>Drivers</h2>
        <!-- Container to hold all driver items -->
        <div id="driverList">
          <div class="driver-item">
            <span>Driver Name</span>
            <div class="buttons">
              <button class="remove" onclick="promptRemoval(this)">Remove</button>
            </div>
          </div>
        </div>

        <button class="add-bottom" onclick="openAddDriverPopup()">Add Driver</button>
      </section>

      <!-- ====== STAFF PAGES ====== -->
      <section id="staffHome" class="staff-page">
        <h2>Staff Dashboard</h2>
        <div class="status-card">
          <p>You Have Orders That Need Drivers</p>
          <span id="ordersDashboardCount" class="notification">0</span>
        </div>
      </section>


      <section id="staffOrders" class="staff-page">
        <h2>Orders <span id="ordersHeaderCount" class="notification small">0</span></h2>

        <!-- ======= ORDER QUEUE ======= -->
        <div class="order-queue">
          <div id="orderQueueList" class="order-queue-list">
            <!-- Orders will be dynamically added here -->
            <!-- Example static item -->
            <div class="order-card" onclick="showOrderDetails('0001', this)">Order #0001</div>
            <div class="order-card" onclick="showOrderDetails('0001', this)">Order #0002</div>
            <div class="order-card" onclick="showOrderDetails('0001', this)">Order #0003</div>
            <div class="order-card" onclick="showOrderDetails('0001', this)">Order #0004</div>
            <div class="order-card" onclick="showOrderDetails('0001', this)">Order #0005</div>
          </div>
        </div>

        <!-- ======= ORDER DETAILS ======= -->
        <div id="orderDetails" class="order-details hidden">
          <div class="order-details-main">
            <!-- Order Summary Area -->
            <div class="order-summary">
              <h3 id="selectedOrderTitle">Order #0001</h3>
              <div class="order-summary-box">
                <p id="selectedOrderDescription">Order Summary goes here...</p>
              </div>
            </div>

            <!-- Recommended Drivers -->
            <div class="recommended-drivers">
              <h4>Recommended Drivers</h4>
              <div id="driverList">
                <button class="driver-btn">Driver 1</button>
                <button class="driver-btn">Driver 2</button>
                <button class="driver-btn">Driver 3</button>
              </div>
            </div>
          </div>

          <!-- ======= BOTTOM ACTION BAR ======= -->
          <div class="order-actions">
            <button class="compute-btn">Compute Delivery Time</button>
            <button class="custom-btn" onclick="openCustomTimePopup()">Custom</button>

            <!-- Timeline -->
            <div class="order-timeline">
              <div class="timeline-step">
                <img src="assets/frontDashIcon.png" alt="Order Sent" class="timeline-icon">
                <span class="timeline-label">Order Sent</span>
              </div>
              <div class="timeline-line"></div>

              <div class="timeline-step">
                <img src="assets/shopIcon.png" alt="Order Received" class="timeline-icon">
                <span class="timeline-label">Order Received</span>
              </div>
              <div class="timeline-line"></div>

              <div class="timeline-step">
                <img src="assets/vehicleIcon.png" alt="In Route" class="timeline-icon">
                <span class="timeline-label">In Route</span>
              </div>
              <div class="timeline-line"></div>

              <div class="timeline-step">
                <img src="assets/homeIcon.png" alt="Delivered" class="timeline-icon">
                <span class="timeline-label">Delivered</span>
              </div>
            </div>

            <button class="remove-btn" onclick="promptOrderRemoval()">Remove</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- ====== POPUPS ====== -->

  <!-- Confirm Remove Popup -->
  <div class="popup-overlay hidden" id="confirmPopup" onclick="overlayClick(event)">
    <div class="popup" onclick="event.stopPropagation()">
      <button class="close-btn" onclick="closePopup()" aria-label="Close">&times;</button>
      <p>Are you sure you want to continue?</p>
      <div class="popup-buttons">
        <button onclick="cancelRemoval()">Go Back</button>
        <button class="remove" onclick="confirmRemoval()">Yes</button>
      </div>
    </div>
  </div

  <!-- Add Staff Popup -->
  <div class="popup-overlay hidden" id="addStaffPopup" onclick="overlayClick(event)">
    <div class="popup" onclick="event.stopPropagation()">
      <button class="close-btn" onclick="closePopup()" aria-label="Close">&times;</button>
      <h3>Add Staff</h3>

      <label>
        First Name:
        <span class="info-icon" onclick="toggleHelpBox('staffFirstHelp')">ⓘ</span>
      </label>
      <input type="text" id="staffFirstName" placeholder="Enter first name" />

      <!-- Help Box for First Name -->
      <div id="staffFirstHelp" class="help-box hidden">
        Make sure to capitalize the first letter of the name.
      </div>

      <label>
        Last Name:
        <span class="info-icon" onclick="toggleHelpBox('staffLastHelp')">ⓘ</span>
      </label>
      <input type="text" id="staffLastName" placeholder="Enter last name" />

      <!-- Help Box for Last Name -->
      <div id="staffLastHelp" class="help-box hidden">
        Make sure to capitalize the first letter of the name.
      </div>

      <div class="popup-buttons">
        <button class="auto-generate" onclick="markAutoGenerate(this)" aria-pressed="false">Auto-Generate</button>
        <button class="approve" onclick="addStaff()">Add</button>
      </div>
    </div>
  </div>


  <!-- Add Driver Popup -->
  <div class="popup-overlay hidden" id="addDriverPopup" onclick="overlayClick(event)">
    <div class="popup" onclick="event.stopPropagation()">
      <button class="close-btn" onclick="closePopup()" aria-label="Close">&times;</button>
      <h3>Add Driver</h3>

      <label>
        First Name:
        <span class="info-icon" onclick="toggleHelpBox('driverFirstHelp')">ⓘ</span>
      </label>
      <input type="text" id="driverFirstName" placeholder="Enter first name" />

      <!-- Help Box for First Name -->
      <div id="driverFirstHelp" class="help-box hidden">
        Make sure to capitalize the first letter of the name.
      </div>

      <label>
        Last Name:
        <span class="info-icon" onclick="toggleHelpBox('driverLastHelp')">ⓘ</span>
      </label>
      <input type="text" id="driverLastName" placeholder="Enter last name" />

      <!-- Help Box for Last Name -->
      <div id="driverLastHelp" class="help-box hidden">
        Make sure to capitalize the first letter of the name.
      </div>

      <div class="popup-buttons popup-buttons--single">
        <button class="approve" onclick="addDriver()">Add</button>
      </div>
    </div>
  </div>
  <!-- Custom Time Input Popup -->
  <div class="popup-overlay hidden" id="customTimePopup" onclick="overlayClick(event)">
    <div class="popup" onclick="event.stopPropagation()">
      <button class="close-btn" onclick="closePopup()" aria-label="Close">&times;</button>
      <h3>Custom Delivery Time</h3>
      <label>Hours: <input type="number" id="customHours" min="0" /></label>
      <label>Minutes: <input type="number" id="customMinutes" min="0" max="59" /></label>
      <div class="popup-buttons">
        <button onclick="submitCustomTime()">Submit</button>
      </div>
    </div>
  </div>
  <!-- ===== First Time Login: Change Password Popup ===== -->
  <div class="popup-overlay hidden" id="changePasswordPopup" onclick="overlayClick(event)">
    <div class="popup" onclick="event.stopPropagation()">
      <h3>First Time Login: <br>Change your Password.</h3>

      <label>
        New Password:
        <span id="newPassInfo" class="info-icon" title="Password requirements">
          ⓘ
        </span>
        <span id="newPassError" class="error-icon hidden">✖</span>
      </label>
      <input type="password" id="newPassword" placeholder="Enter new password" oninput="validatePassword()" />

      <label>
        Confirm Password:
        <span id="confirmPassError" class="error-icon hidden">✖</span>
      </label>
      <input type="password" id="confirmPassword" placeholder="Confirm password" oninput="validatePassword()" />

      <!-- Requirements list (hidden until info icon clicked) -->
      <div id="passwordRequirements" class="password-requirements hidden">
        <ul>
          <li>Minimum of <strong>six characters</strong></li>
          <li>At least <strong>one uppercase letter</strong></li>
          <li>At least <strong>one lowercase letter</strong></li>
          <li>At least <strong>one number</strong></li>
        </ul>
      </div>

      <div class="popup-buttons">
        <button id="changePasswordBtn" class="approve" onclick="submitPasswordChange()" disabled>Login</button>
      </div>
    </div>
  </div>
  <!-- ===== Change Password Popup ===== -->
  <div class="popup-overlay hidden" id="mainChangePasswordPopup" onclick="overlayClick(event)">
    <div class="popup" onclick="event.stopPropagation()">
      <button class="close-btn" onclick="closePopup()" aria-label="Close">&times;</button>
      <h3>Change Password</h3>

      <label>
        New Password:
        <span id="mainNewPassError" class="error-icon hidden">✖</span>
      </label>
      <input type="password" id="mainNewPassword" placeholder="Enter new password" oninput="validateMainPassword()" />

      <label>
        Confirm Password:
        <span id="mainConfirmPassError" class="error-icon hidden">✖</span>
      </label>
      <input type="password" id="mainConfirmPassword" placeholder="Confirm password" oninput="validateMainPassword()" />

      <div class="password-requirements">
        <ul>
          <li>Minimum of <strong>six characters</strong></li>
          <li>At least <strong>one uppercase letter</strong></li>
          <li>At least <strong>one lowercase letter</strong></li>
          <li>At least <strong>one number</strong></li>
        </ul>
      </div>

      <div class="popup-buttons">
        <button id="mainChangePasswordBtn" class="approve" onclick="submitMainPasswordChange()" disabled>
          Change Password
        </button>
      </div>
    </div>
  </div>
</body>
</html>
